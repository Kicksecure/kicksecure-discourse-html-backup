<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Systemd Service Hardening?</title>
    <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258</link>
    <description>So I was learning about the options for Systemd services for restricting or in another word “hardening” services.

This made me question does Kicksecure deploy certain hardening for it’s services or certain Kicksecure specific services?

These are some interesting options I will note here:

[`PrivateNetwork=yes/no`](https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#PrivateNetwork=) 
Gives the service its own network namespace. It can’t see or use the host’s network interfaces unless you explicitly bind sockets. Seems useful to prevent leaks or prevent services from being ran without networking?

[`PrivatePIDs=yes/no`](https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#PrivatePIDs=) 
Gives a service an isolated view of the process table, which is a useful “defense in depth” measure, especially for daemons that don’t need to inspect or manage other system processes.

[`PrivateTmp=yes/no`](https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#PrivateTmp=) 
Provides a private /tmp and /var/tmp for the service, isolating it from the host’s temporary directories. One service can’t read temporary files left by another service, which mitigates attacks that rely on guessing or stealing temp‑file names.

[`MemoryDenyWriteExecute=yes/no`](https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#MemoryDenyWriteExecute=) 
Remounts parts of the filesystem read‑only (or makes the whole tree read‑only) for the service. (helps mitigate code‑injection attacks).

[`ProtectSystem=full/strict/yes`](https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#ProtectSystem=) 
Remounts parts of the filesystem read‑only (or makes the whole tree read‑only) for the service.

There is many others but these few caught my eye.</description>
    
    <lastBuildDate>Wed, 27 Aug 2025 20:47:30 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>FWIW, CUPS doesn’t even appear to be installed on Kicksecure 17 by default, unless I accidentally uninstalled it in my development VM during other work:</p>
<pre><code class="lang-auto">[sysmaint ~]% apt list --installed | grep cups

WARNING: apt does not have a stable CLI interface. Use with caution in scripts.

libcups2/oldstable,oldstable-security,now 2.4.2-3+deb12u8 amd64 [installed,automatic]
</code></pre>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/7">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/7</link>
        <pubDate>Wed, 27 Aug 2025 20:47:30 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-7</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[Quiksilver]]></dc:creator>
        <description><![CDATA[
            <p>Honestly I really doubt upstream or Debian would add anything that disables network and LAN printing such as:</p>
<pre><code class="lang-auto">CapabilityBoundingSet=CAP_NET_BIND_SERVICE
PrivateNetwork=yes
</code></pre>
<p>However they might be accepting to <code>NoNewPrivileges=yes</code> and others.</p>
<p>People do indeed use network printing or LAN printing (I don’t do either personally) but maybe a new thread regarding CUPS should be made like “should CUPS even come disabled by default” or the ideas mentioned here.</p>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/6">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/6</link>
        <pubDate>Wed, 27 Aug 2025 20:34:37 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-6</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Yes, systemd configuration snippet drop-in support is amazing.</p>
<p>(As a distribution we should use folder <code>/usr/lib/systemd/system</code> rather than <code>/etc</code>.)</p>
<p>Any systemd hardening options:</p>
<ol>
<li>Please try to submit them upstream. (Such as to cups.) If that does not work,</li>
<li>Submit them to Debian.</li>
<li>Only then consider submitting these to Kicksecure.</li>
</ol>
<p>This is for the purpose of maintainability.</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Dev/maintainability">
  <header class="source">
      <img src="https://www.kicksecure.com/favicon.svg?hsversion-headscript-replacement-by-server=1&amp;hsversion_from_server_replacement_unixtime=1756287028" class="site-icon" alt="" width="151" height="151">

      <a href="https://www.kicksecure.com/wiki/Dev/maintainability" target="_blank" rel="noopener" title="01:34PM - 25 August 2025">Kicksecure – 25 Aug 25</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/387;"><img src="https://www.kicksecure.com/w/images/5/51/Kicksecure-image-twitter-post.jpg?version=30a0ad75271a4836786771c345c960b8" class="thumbnail" alt="" width="690" height="388"></div>

<h3><a href="https://www.kicksecure.com/wiki/Dev/maintainability" target="_blank" rel="noopener">Maintainability</a></h3>

  <p>Exploring the challenges of maintainability in the Kicksecure project and Open Source development.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>See also:</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://www.kicksecure.com/wiki/Dev/Relationship_With_Upstream">
  <header class="source">
      <img src="https://www.kicksecure.com/favicon.svg?hsversion-headscript-replacement-by-server=1&amp;hsversion_from_server_replacement_unixtime=1756287028" class="site-icon" alt="" width="151" height="151">

      <a href="https://www.kicksecure.com/wiki/Dev/Relationship_With_Upstream" target="_blank" rel="noopener" title="02:18PM - 07 August 2025">Kicksecure – 7 Aug 25</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/387;"><img src="https://www.kicksecure.com/w/images/5/51/Kicksecure-image-twitter-post.jpg?version=30a0ad75271a4836786771c345c960b8" class="thumbnail" alt="" width="690" height="388"></div>

<h3><a href="https://www.kicksecure.com/wiki/Dev/Relationship_With_Upstream" target="_blank" rel="noopener">Relationship With Upstream</a></h3>

  <p>Kicksecure Relationship with Upstream Projects.</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>This is not on our immediate roadmap: <a href="https://www.kicksecure.com/wiki/Security_Roadmap" class="inline-onebox">Kicksecure Security Roadmap</a></p>
<p>But anyone feel free to work on this.</p>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/5">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/5</link>
        <pubDate>Wed, 27 Aug 2025 18:46:01 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-5</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[Quiksilver]]></dc:creator>
        <description><![CDATA[
            <p>Thanks for sharing this info I was not aware of this. <code>PrivateNetwork=yes/no</code> looks like a good option for CUPS and others we don’t need network access.</p>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/4">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/4</link>
        <pubDate>Wed, 27 Aug 2025 18:13:47 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-4</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[Quiksilver]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="https://forums.kicksecure.com/u/arraybolt3">@arraybolt3</a><br>
On the USBGuard thread you mentioned CUPS, does systemd support a drop in file? it looks like documentation states it does?</p>
<blockquote>
<p>Along with a unit file foo.service, a “drop-in” directory foo.service.d/ may exist. All files with the suffix “.conf” from this directory will be merged in the alphanumeric order and parsed after the main unit file itself has been parsed. This is useful to alter or add configuration settings for a unit, without having to modify unit files. Each drop-in file must contain appropriate section headers. For instantiated units, this logic will first look for the instance “.d/” subdirectory (e.g. “foo@bar.service.d/”) and read its “.conf” files, followed by the template “.d/” subdirectory (e.g. “foo@.service.d/”) and the “.conf” files there. Moreover, for unit names containing dashes (“-”), the set of directories generated by repeatedly truncating the unit name after all dashes is searched too. Specifically, for a unit name foo-bar-baz.service not only the regular drop-in directory foo-bar-baz.service.d/ is searched but also both foo-bar-.service.d/ and foo-.service.d/. This is useful for defining common drop-ins for a set of related units, whose names begin with a common prefix. This scheme is particularly useful for mount, automount and slice units, whose systematic naming structure is built around dashes as component separators. Note that equally named drop-in files further down the prefix hierarchy override those further up, i.e. foo-bar-.service.d/10-override.conf overrides foo-.service.d/10-override.conf.</p>
</blockquote>
<blockquote>
<p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.unit.html" class="inline-onebox" rel="noopener nofollow ugc">systemd.unit</a></p>
</blockquote>
<p>Couldn’t we create a CUPS drop in <code>/etc/systemd/system/cups.service.d/hardening.conf</code> that would apply some hardened options that would essentially mitigate:</p>
<blockquote>
<p>WAN / public internet: a remote attacker sends an UDP packet to port 631. No authentication whatsoever.<br>
LAN: a local attacker can spoof zeroconf / mDNS / DNS-SD advertisements (we will talk more about this in the next writeup ) and achieve the same code path leading to RCE.</p>
</blockquote>
<p>I don’t think the package manager would ever touch it either with upgrades to CUPS?</p>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/3">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/3</link>
        <pubDate>Wed, 27 Aug 2025 18:12:18 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-3</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>I don’t think we harden specific “third-party” services yet, but we definitely use these kinds of things for applicable services in Kicksecure and Whonix. See <a href="https://github.com/Kicksecure/sdwdate/blob/master/usr/lib/systemd/system/sdwdate.service" class="inline-onebox" rel="noopener nofollow ugc">sdwdate/usr/lib/systemd/system/sdwdate.service at master · Kicksecure/sdwdate · GitHub</a> for instance, there’s a whole battery of hardening options enabled here, including a syscall filter.</p>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/2">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/2</link>
        <pubDate>Tue, 26 Aug 2025 02:21:16 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-2</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
      <item>
        <title>Systemd Service Hardening?</title>
        <dc:creator><![CDATA[goose4]]></dc:creator>
        <description><![CDATA[
            <p>So I was learning about the options for Systemd services for restricting or in another word “hardening” services.</p>
<p>This made me question does Kicksecure deploy certain hardening for it’s services or certain Kicksecure specific services?</p>
<p>These are some interesting options I will note here:</p>
<p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#PrivateNetwork=" rel="noopener nofollow ugc"><code>PrivateNetwork=yes/no</code></a><br>
Gives the service its own network namespace. It can’t see or use the host’s network interfaces unless you explicitly bind sockets. Seems useful to prevent leaks or prevent services from being ran without networking?</p>
<p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#PrivatePIDs=" rel="noopener nofollow ugc"><code>PrivatePIDs=yes/no</code></a><br>
Gives a service an isolated view of the process table, which is a useful “defense in depth” measure, especially for daemons that don’t need to inspect or manage other system processes.</p>
<p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#PrivateTmp=" rel="noopener nofollow ugc"><code>PrivateTmp=yes/no</code></a><br>
Provides a private /tmp and /var/tmp for the service, isolating it from the host’s temporary directories. One service can’t read temporary files left by another service, which mitigates attacks that rely on guessing or stealing temp‑file names.</p>
<p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#MemoryDenyWriteExecute=" rel="noopener nofollow ugc"><code>MemoryDenyWriteExecute=yes/no</code></a><br>
Remounts parts of the filesystem read‑only (or makes the whole tree read‑only) for the service. (helps mitigate code‑injection attacks).</p>
<p><a href="https://www.freedesktop.org/software/systemd/man/latest/systemd.exec.html#ProtectSystem=" rel="noopener nofollow ugc"><code>ProtectSystem=full/strict/yes</code></a><br>
Remounts parts of the filesystem read‑only (or makes the whole tree read‑only) for the service.</p>
<p>There is many others but these few caught my eye.</p>
          <p><a href="https://forums.kicksecure.com/t/systemd-service-hardening/1258/1">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/systemd-service-hardening/1258/1</link>
        <pubDate>Tue, 26 Aug 2025 01:47:58 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1258-1</guid>
        <source url="https://forums.kicksecure.com/t/systemd-service-hardening/1258.rss">Systemd Service Hardening?</source>
      </item>
  </channel>
</rss>
