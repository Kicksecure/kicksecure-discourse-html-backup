<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Unplugging external drive should trigger a shutdown</title>
    <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994</link>
    <description>Hello Kicksecure folks,

I installed Debian on my brand new Western Digital external SSD drive. Then I proceeded to distro morph it following the guide (prob should have went with the ISO route) and everything works as intended.

However when I unplug my SSD or it comes unplugged somehow (has happened before) it doesn&#39;t trigger a full shutdown?

Why doesn&#39;t it fully shutdown when unplugged?
I do want to add that also set up LUKS when I installed Debian.

Do I need to create a udev rule that runs a shutdown script (unmount, cryptsetup luksClose, and sync)?</description>
    
    <lastBuildDate>Tue, 09 Sep 2025 20:28:11 +0000</lastBuildDate>
    <category>Development</category>
    <atom:link href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="20" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/p/b2d939/48.png" class="avatar"> Patrick:</div>
<blockquote>
<p>This feature will most likely become available in Kicksecure 18.</p>
</blockquote>
</aside>
<p><a class="mention" href="https://forums.kicksecure.com/u/arraybolt3">@arraybolt3</a> Does the same thing you said in USBGuard post apply to emergency shutdown feature added? No new rules added to <code>/etc/udev/rules.d/</code> after upgrade.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/28">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/28</link>
        <pubDate>Tue, 09 Sep 2025 20:28:11 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-28</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>The status is still the same:</p><aside class="quote" data-post="20" data-topic="994">
  <div class="title">
    <div class="quote-controls"></div>
    <img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/p/b2d939/48.png" class="avatar">
    <div class="quote-title__text-content">
      <a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/20">Unplugging external drive should trigger a shutdown</a> <a class="badge-category__wrapper " href="https://forums.kicksecure.com/c/development/7"><span data-category-id="7" style="--category-badge-color: #25AAE2; --category-badge-text-color: #FFF;" data-drop-close="true" class="badge-category --style-square " title="Development of Kicksecure software and source code."><span class="badge-category__name">Development</span></span></a>
    </div>
  </div>
  <blockquote>
    Unplugging external drive → shutdown: This feature has been implemented in packages security-misc, helper-scripts and user-sysmaint-split by <a class="mention" href="https://forums.kicksecure.com/u/arraybolt3">@arraybolt3</a>. This feature will most likely become available in Kicksecure 18.
  </blockquote>
</aside>

<p>Distribution morphing won’t be special in this regard. Will be the same the “regular” version.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/27">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/27</link>
        <pubDate>Wed, 27 Aug 2025 18:35:20 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-27</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Quiksilver]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Patrick" data-post="20" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/p/b2d939/48.png" class="avatar"> Patrick Schleizer:</div>
<blockquote>
<p>This feature has been implemented in packages security-misc, helper-scripts and user-sysmaint-split</p>
</blockquote>
</aside>
<p>Should it be added to disro morphs now when you go to upgrade?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/26">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/26</link>
        <pubDate>Wed, 27 Aug 2025 18:16:05 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-26</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="onebox githubissue" data-onebox-src="https://github.com/QubesOS/qubes-issues/issues/10174">
  <header class="source">

      <a href="https://github.com/QubesOS/qubes-issues/issues/10174" target="_blank" rel="noopener">github.com/QubesOS/qubes-issues</a>
  </header>

  <article class="onebox-body">
    <div class="github-row">
  <div class="github-icon-container" title="Issue" data-github-private-repo="false">
	  <svg width="60" height="60" class="github-icon" viewBox="0 0 14 16" aria-hidden="true"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg>
  </div>

  <div class="github-info-container">
    <h4>
      <a href="https://github.com/QubesOS/qubes-issues/issues/10174" target="_blank" rel="noopener">Consider the impact of USBGuard in sys-usb</a>
    </h4>

    <div class="github-info">
      <div class="date">
        opened <span class="discourse-local-date" data-format="ll" data-date="2025-08-22" data-time="18:22:07" data-timezone="UTC">06:22PM - 22 Aug 25 UTC</span>
      </div>

        <div class="date">
          closed <span class="discourse-local-date" data-format="ll" data-date="2025-08-23" data-time="00:42:19" data-timezone="UTC">12:42AM - 23 Aug 25 UTC</span>
        </div>

      <div class="user">
        <a href="https://github.com/ArrayBolt3" target="_blank" rel="noopener">
          <img alt="" src="https://avatars.githubusercontent.com/u/104878738?v=4" class="onebox-avatar-inline" width="20" height="20">
          ArrayBolt3
        </a>
      </div>
    </div>

    <div class="labels">
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          R: not applicable
        </span>
        <span style="display:inline-block;margin-top:2px;background-color: #B8B8B8;padding: 2px;border-radius: 4px;color: #fff;margin-left: 3px;">
          P: default
        </span>
    </div>
  </div>
</div>

  <div class="github-row">
    <p class="github-body-container">[How to file a helpful issue](https://www.qubes-os.org/doc/issue-tracking/)

I a<span class="show-more-container"><a href="" rel="noopener" class="show-more">…</a></span><span class="excerpt hidden">pologize in advance if this isn't really the right spot for this, I couldn't find a "development" category on the forums so this is the closest I could figure out.

### The problem you're addressing (if any)

In Kicksecure 18 and higher, we're going to be shipping USBGuard, enabled by default, with a configuration that allows all devices that are present in the system on bootup, and blocks all non-whitelisted devices that are plugged in after bootup. By default, the whitelist in Kicksecure will allow USB mass storage devices, and will allow a single mouse and keyboard at a time (additional keyboards are rejected). All other devices are rejected, including devices that combine a USB mass storage interface with anything else, and devices that combine a keyboard or mouse interface with anything (except for "unified" keyboard/mouse devices like are common with some wireless receivers). The goal is to allow a limited subset of common USB devices to work out of the box, while also thwarting devices like the USB "rubber ducky".

This feature set makes good sense for Kicksecure on the desktop, but we're unsure if it makes sense in Qubes OS, if a user chooses to use Kicksecure on sys-usb. On the one hand, USBGuard in sys-usb could substantially increase the security of users who have to pass through USB keyboards and mice to dom0 (only one keyboard and mouse would be allowed, a keystroke injection device would be rejected so long as it was not present when sys-usb booted and a legitimate USB keyboard was already plugged in). On the other hand, USBGuard could frustrate users who need to work with things such as USB headsets, webcams, touchscreens, and other "advanced" devices. In theory a user could reboot sys-usb to get these devices to work (assuming our configuration actually does trust everything present on bootup), but maybe that's too much hassle?

The USBGuard configuration we intend to ship in Kicksecure 18 can be seen [here](https://github.com/Kicksecure/security-misc/blob/master/etc/usbguard/rules.d/30_security-misc.conf).

### The solution you'd like

Determine if USBGuard in a Kicksecure-based sys-usb makes sense, and if any configuration changes are needed in the event it is useful in Qubes OS.

### The value to a user and who that user might be

If we choose to leave it enabled, users will be able to pass through input devices to dom0 with less risk of malicious devices being able to take over the system.

If we choose to disable it, users won't end up facing new issues with USB device passthrough.

### Completion criteria checklist

(This section is for developer use only. Please do not modify it.)</span></p>
  </div>

  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/25">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/25</link>
        <pubDate>Sat, 23 Aug 2025 10:08:25 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-25</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Quiksilver]]></dc:creator>
        <description><![CDATA[
            <p>Very nice work arraybolt3</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/24">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/24</link>
        <pubDate>Sat, 16 Aug 2025 18:03:30 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-24</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Almost certainly yes. If it doesn’t, that would be a bug.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/23">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/23</link>
        <pubDate>Fri, 08 Aug 2025 22:33:53 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-23</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[init38]]></dc:creator>
        <description><![CDATA[
            <p>Will it work in LIVE ISO and LIVE Mode in general?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/22">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/22</link>
        <pubDate>Fri, 08 Aug 2025 22:10:39 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-22</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>related:</p>
<ul>
<li><a href="https://forums.kicksecure.com/t/emergency-key-press-shutdown-sequence/1199" class="inline-onebox">Emergency key press shutdown sequence</a></li>
<li><a href="https://forums.kicksecure.com/t/ctrl-alt-del-three-finger-salute-action/1197" class="inline-onebox">Ctrl+Alt+Del (three-finger salute) action</a></li>
</ul>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/21">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/21</link>
        <pubDate>Wed, 06 Aug 2025 07:23:07 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-21</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>Unplugging external drive → shutdown: This feature has been implemented in packages security-misc, helper-scripts and user-sysmaint-split by <a class="mention" href="https://forums.kicksecure.com/u/arraybolt3">@arraybolt3</a>. This feature will most likely become available in Kicksecure 18.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/20">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/20</link>
        <pubDate>Tue, 05 Aug 2025 10:21:26 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-20</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Ended up changing my mind about not implementing it until Trixie. The same bug that was tripping up emerg-shutdown was also tripping up a different feature we wanted, which was making it possible to guarantee a normal shutdown would eventually work. Ironically, guaranteeing normal shutdown functionality appears to be impossible (<a href="https://github.com/systemd/systemd/issues/38261#issuecomment-3130259046" class="inline-onebox" rel="noopener nofollow ugc">Provide a timeout that will always unconditionally succeed at shutting down or rebooting the system · Issue #38261 · systemd/systemd · GitHub</a>), but I managed to get emerg-shutdown working on Kicksecure 17!</p>
<p>The bug turned out to be an Intel i915 graphics driver issue. If emerg-shutdown tries to bring down the machine while X11 has control of the screen, the i915 driver will sometimes trigger a kernel warn during shutdown. This turns into a kernel panic because of <code>panic-on-oops.service</code>. To prevent this, all that needs to be done is to simply disable the kernel’s <code>panic_on_warn</code> and <code>panic_on_oops</code> options before shutting down. To further attempt to keep the driver from throwing a kernel warning at all, I also added code that switches to an unopened (and therefore non-graphical) TTY before shutdown. In my testing this kept the driver happy.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/19">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/19</link>
        <pubDate>Tue, 29 Jul 2025 01:52:26 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-19</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Unfortunately, despite having developed this feature to the point where I would almost consider it ready to deploy, I have been unable to get it to work reliably on Kicksecure. It works just fine on plain Debian 12, but under Kicksecure it malfunctions in a very strange way that I have yet to figure out. I’ll most likely try to resume work on this for Trixie, in the hopes that things “just work” there.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/18">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/18</link>
        <pubDate>Thu, 17 Jul 2025 03:09:13 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-18</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>I’ve added panic key handling to the current emergency shutdown implementation. This will make it so that not only can you trigger an instant shutdown by removing a drive, but you can also do so by pressing a key combo. This is still only in my in-development security-misc and helper-scripts branches, but it’s coming along quite well. Thought I should give an update since it’s been a while since I worked on this <img src="https://forums.kicksecure.com/images/emoji/twitter/slight_smile.png?v=12" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/17">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/17</link>
        <pubDate>Mon, 14 Jul 2025 01:58:16 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-17</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p>See:<br>
<a href="https://www.kicksecure.com/wiki/Ram-wipe#Unmount_Encrypted_Root_Disk_to_Wipe_Full_Disk_Encryption_Key">Unmount Encrypted Root Disk to Wipe Full Disk Encryption Key</a><br>
(written just now)</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/16">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/16</link>
        <pubDate>Tue, 17 Jun 2025 15:23:25 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-16</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <p>Now onto closing LUKS volumes followed clearing memory and then shutting down.</p>
<p>I mainly took from buskill for the script but I changed something since it doesn’t appear to explicitly check if its a luks device in the loop before suspending it. The logging was me trying to debug it to see what was going on.</p>
<pre data-code-wrap="sh"><code class="lang-sh"># Set up logging
LOG_FILE="/var/log/emergency-shutdown.log"

# Function to suspend LUKS volumes
echo "Emergency shutdown initiated: $(date)" &gt; "$LOG_FILE"
suspend_luks_volumes() {
    echo "INFO: Removing decryption keys from memory" &gt;&gt; "$LOG_FILE"
    for device in /dev/mapper/*; do
        if cryptsetup isLuks "$device"; then
            echo "Suspending $device..." &gt;&gt; "$LOG_FILE"
            if cryptsetup luksSuspend "$device"; then
                echo "Successfully suspended $device" &gt;&gt; "$LOG_FILE"
            else
                echo "Failed to suspend $device. Error: $?" &gt;&gt; "$LOG_FILE"
            fi
        fi
    done
}
</code></pre>
<p>The system locks up and doesn’t go to a black screen and show anything?<br>
I’m not sure if this cause the root filesystem is the luks volume (FDE) or what?</p>
<p>Do I need to kill x &amp; lightdm or switch over to a minimal env or a tty to switch over to a black screen?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/15">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/15</link>
        <pubDate>Mon, 16 Jun 2025 02:26:29 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-15</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <p>Sorry for the late reply to the post but I wanted to follow up with what I did and what I’m trying to troubleshoot at the moment.</p>
<p>What worked for me so far or the steps I have taken.<br>
Prob might have to re-edit this when I double check on my other system I’m testing this with, just have been busy with things like work atm.</p>
<p>Thanks to <a class="mention" href="https://forums.kicksecure.com/u/maltfield">@maltfield</a> for buskill and providing the to code start from.</p>
<hr>
<p>I created a udev rule:</p>
<p><code>/etc/udev/rules.d/emergencyshutdown.rules</code></p>
<ul>
<li>udev shutdown rule:</li>
</ul>
<p><code>ACTION=="remove", SUBSYSTEM=="usb", ENV{ID_MODEL}=="Samsung Model" RUN+="/usr/bin/systemctl poweroff --force --ignore-inhibit"</code></p>
<p><code>shutdown -h now</code> didn’t work for me since I was logged in as another user and the other user was still logged in. Normally this would be no issue on traditional linux but on systemd-based systems <code>/sbin/shutdown</code> is typically a symlink to <code>/usr/bin/systemctl</code>. This means that when you run shutdown, you’re indirectly using systemctl. I don’t recall <code>shutdown --force</code> helping, though I will have to check my notes.</p>
<p>So I went with the <code>systemctl poweroff --force --ignore-inhibit</code> since parameter that modifies the shutdown process by forcing it to proceed and ignoring inhibitor locks, allowing the system to shut down even if other users are logged in. Which seemed to be an issue for me.</p>
<ul>
<li>udev Environment variables vs <code>ATTRS{idVendor}</code> and  <code>ATTRS{idProduct}</code></li>
</ul>
<p>So I’m not sure if its my device (External Samsung SSD) or since I’m running it off the external SSD, but it appears that <code>ATTRS{idVendor}</code> <code>ATTRS{idProduct}</code> only worked but I need to double check again.<br>
Samsung has been known for issues like with things like SMART support so that something to take into account maybe related.</p>
<p>I used <code>lsusb</code> do get the ID_VENDOR (first hexadecimal number) and the ID_PRODUCT (:second hexadecimal number).</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/14">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/14</link>
        <pubDate>Mon, 16 Jun 2025 02:20:35 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-14</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>It doesn’t use ram-wipe at the moment. It may be desirable for something like that to be done, but given the limitations we’re operating under to avoid crashes, it might not be possible or practical. Good TODO for me to research.</p>
<p>I currently have some higher-priority tasks in my queue that are keeping me from getting back to this, but it’s definitely not dropped off my radar and I’m looking forward to finishing this when I can.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/13">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/13</link>
        <pubDate>Sat, 31 May 2025 01:19:24 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-13</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="Quiksilver" data-post="11" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/user_avatar/forums.kicksecure.com/quiksilver/48/110_2.png" class="avatar"> Quiksilver:</div>
<blockquote>
<p>Does it use the existing <code>ram-wipe</code> package as <a class="mention" href="https://forums.kicksecure.com/u/nth9r6">@NTH9R6</a> mentioned?</p>
</blockquote>
</aside>
<p>Packaging hasn’t been discussed/decided yet.</p>
<p>When there’s something to announce, we’ll post here and mention it in the next release changelog.</p>
<aside class="quote no-group quote-modified" data-username="Quiksilver" data-post="11" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/user_avatar/forums.kicksecure.com/quiksilver/48/110_2.png" class="avatar"> Quiksilver:</div>
<blockquote>
<blockquote>
<p>Once this is done and working</p>
</blockquote>
<p>Any way to donate towards this work specifically?</p>
</blockquote>
</aside>
<p>Goal specific donations are unsupported.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/12">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/12</link>
        <pubDate>Fri, 30 May 2025 12:59:55 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-12</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Quiksilver]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="arraybolt3" data-post="9" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/user_avatar/forums.kicksecure.com/arraybolt3/48/88_2.png" class="avatar"> arraybolt3:</div>
<blockquote>
<p>Also wrote a rather thorough “force shutdown” script based partially on <a class="mention" href="https://forums.kicksecure.com/u/maltfield">@maltfield</a>’s suggestions above.</p>
</blockquote>
</aside>
<p>Does it use the existing <code>ram-wipe</code> package as <a class="mention" href="https://forums.kicksecure.com/u/nth9r6">@NTH9R6</a> mentioned?</p>
<blockquote>
<p>Once this is done and working</p>
</blockquote>
<p>Any way to donate towards this work specifically?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/11">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/11</link>
        <pubDate>Fri, 30 May 2025 01:06:24 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-11</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Did a lot of research into this, the approach I was taking technically worked but was not at all guaranteed to work. The issues (and how to work around them) I documented pretty well in a code comment in the program I’m currently writing to implement this:</p>
<pre data-code-wrap="c"><code class="lang-c">/*
 * This program is designed specifically to immediately and forcibly power off
 * the system in the event the device providing the root filesystem is
 * abruptly removed from the system. The idea is that a user can shut down
 * a portable installation of Kicksecure by simply yanking the USB drive
 * containing the installation from the computer. Tails provides essentially
 * the same feature, however it is known for occasionally failing to do its
 * job properly.
 *
 * The fact that we're triggering a shutdown when the device containing the
 * root filesystem vanishes presents a number of significant challenges:
 *
 * - The device providing the entire operating system is gone. The only things
 *   we will still have left are the kernel, files loaded into RAM (for
 *   instance under /run), and anything that happens to still be in the
 *   system's disk cache.
 * - Virtually any process on the system may abruptly crash at any time. This
 *   isn't just because applications may be unable to access files. The Linux
 *   kernel's virtual memory subsystem doesn't just page out RAM contents to a
 *   swap file, it will sometimes simply erase pages containing executable
 *   code from memory if it can reload that code from disk later when needed.
 *   If part of a program isn't present in memory, and then the root device
 *   vanishes, any attempt to use code in the absent part of the application
 *   will result in the application crashing. (Attempts to access data in RAM
 *   that happened to be paged out will result in a similar crash.)
 * - We have no control over what is and isn't in the disk cache, which makes
 *   it unsafe to launch any dynamically linked executable. What happens if we
 *   need to load a missing part of libc? What if the dynamic linker itself
 *   needs loaded from disk?
 * - Systemd could lock up at any time, since the init process isn't immune to
 *   having bits of it erased from RAM to free up memory. If systemd receives
 *   a SIGSEGV, rather than crashing (which would panic the kernel), it goes
 *   into an "emergency mode" that tries to keep the system as operational as
 *   possible even though PID 1 is now out of service.
 *
 * Circumventing this set of difficulties is not easy, and it might not even
 * be entirely possible. To give our feature the highest chance of success:
 *
 * - We use memlockd to lock systemd into memory. It can holds its own pretty
 *   well in the event of a segfault, but if its crash handler ends up
 *   re-segfaulting, that could get ugly. For good measure, we lock libc,
 *   libsystemd-core, and libsystemd-shared into memory too so that the crash
 *   handler has the highest possible chance of not re-crashing.
 * - We compile the utility at boot time, statically link it against all of
 *   its dependencies (really only one, glibc), and load it into /run. This
 *   allows for decent architecture independence while removing any dependency
 *   on anything that isn't in RAM, thus (hopefully!) making the process
 *   crash-immune.
 * - Because we're static-linking against glibc, we cannot call anything
 *   defined in stdio.h. This is because glibc uses dlopen() to load iconv
 *   modules, which are used internally by glibc for locale support. Things
 *   defined in stdio.h may use iconv, so calling anything there will
 *   basically make our static-linked executable become dynamically linked,
 *   which could segfault it since the root filesystem is gone. We can't call
 *   anything that could touch Name Service Switch (NSS) either, but we have
 *   no need to do so, so we should be safe there. See
 *   https://stackoverflow.com/questions/57476533/why-is-statically-linking-glibc-discouraged
 * - We can't use udev either because libudev is only available as a dynamic
 *   library. That means we have to listen to kernel uevents directly to
 *   determine when the root device vanishes. Thankfully this isn't as much of
 *   a pain as it might sound like.
 * - We don't call out to any external process, since those external processes
 *   could segfault.
 *
 * This is likely superior to Tails' implementation, which uses udev (and thus
 * dynamic linking), uses an interpreter-driven script to shut down the system
 * when the root device vanishes, and calls out to external executables to
 * actually shut the system down. These issues are likely why Tails'
 * implementation of emergency shutdown occasionally fails. See
 * https://www.reddit.com/r/tails/comments/xh8njn/tails_wont_shutdown_when_i_pull_usb_stick/
 * (there are other similar posts as well).
 */
</code></pre>
<p>The rest of my research was focused mainly on figuring out how to read kernel uevents without involving libudev. This took a while, partially because libudev itself was sticking its head in the way and confusing my program’s output, and partially because <code>man 7 netlink</code> was extraordinarily misleading (it told me the data from the kernel I was reading was going to be in one format, it turned out to be in a completely different format). However, I’ve gotten to the point where I <em>can</em> read kernel uevents, which will let me detect when the root filesystem drive is removed without needing any other libraries or executables (which is important for the reasons described above).</p>
<p>Once this is done and working, it might be worth trying to contribute it back to Tails (or at least let them know about our work) so they can improve their implementation as well.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/10">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/10</link>
        <pubDate>Fri, 09 May 2025 05:15:56 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-10</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Won’t be able to finish this tonight, determining the block device that’s <em>actually</em> underneath the filesystem is a bit of a challenge. One of the comments I wrote in my current code reads:</p>
<pre><code class="lang-auto">    # ... the real underlying device may be many
    # layers deep. For instance, with the Kicksecure ISO, the root filesystem
    # is mounted from an overlayfs which uses a lower directory mounted from a
    # loop device backed by a squashfs located in a directory under a
    # mountpoint backed by /dev/sr0 (when booting from a CD-ROM drive that
    # is).
</code></pre>
<p>There’s also some higher-priority work for me to tackle before I finish this. I have most of the research done though, including how to find underlying devices or mountpoints in a wide variety of situations, and how to monitor the real device once you find it. Also wrote a rather thorough “force shutdown” script based partially on <a class="mention" href="https://forums.kicksecure.com/u/maltfield">@maltfield</a>’s suggestions above.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/9">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/9</link>
        <pubDate>Wed, 07 May 2025 05:41:14 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-9</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>This is definitely a good idea. I took a look at the linked video about BusKill, the idea seems good but I don’t think that’s the method we should use for Kicksecure, because it’s bound to the USB product ID. You have to custom-write the udev rule for the specific USB drive in use. We could in theory detect this on boot I guess, but that seems a bit clunky. I also don’t trust USB drive manufacturers to choose truly unique IDs, as opposed to just putting in some example ID they found in documentation somewhere. (If even AMD can make this mistake with encryption keys related to microcode security, I have no reason to trust off-brand USB drive makers to do any better.) The last thing a user needs is to have their system suddenly shut down because they removed a drive that happened to look suspiciously similar to the main drive.</p>
<p>I looked at how Tails has this implemented, and basically:</p>
<ul>
<li>They have a custom C executable, <a href="https://gitlab.tails.boum.org/tails/tails/-/blob/master/config/chroot_local-includes/usr/src/udev-watchdog.c" rel="noopener nofollow ugc">udev-watchdog</a>, which appears to watch for a specified device to be removed and send some sort of signal to whatever called it when that happens.</li>
<li>There’s then a wrapper around it that figures out which device is the boot drive, uses udev-watchdog to watch for when it gets removed, and then triggers a hard shutdown when that happens.</li>
</ul>
<p>This is a somewhat better solution IMO, and the code behind it is open-source so in theory we could just integrate it directly into Kicksecure. It does have some possible downsides though, most notably I found some <a href="https://www.reddit.com/r/tails/comments/xh8njn/tails_wont_shutdown_when_i_pull_usb_stick/" rel="noopener nofollow ugc">reports that the feature didn’t always work three years ago</a>, when the last code change <a href="https://gitlab.tails.boum.org/tails/tails/-/blob/master/config/chroot_local-includes/usr/local/lib/udev-watchdog-wrapper" rel="noopener nofollow ugc">was four years ago</a>. Maybe that was just user error though.</p>
<p>For Kicksecure’s implementation, I’d like to avoid custom C code since Kicksecure tries to use architecture-independent code wherever possible. We can use a udev-based approach similar to Tails, but written using Python and pyudev instead. I’ll try to implement this probably tonight and see what happens.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/8">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/8</link>
        <pubDate>Wed, 07 May 2025 03:23:46 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-8</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[maltfield]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="NTH9R6" data-post="6" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/n/b2d939/48.png" class="avatar"> NTH9R6:</div>
<blockquote>
<p>would clear the LUKS password from system memory.</p>
</blockquote>
</aside>
<p>Take a look at <a href="https://www.man7.org/linux/man-pages/man8/cryptsetup-luksSuspend.8.html" rel="noopener nofollow ugc">luksSuspend</a></p>
<aside class="quote no-group" data-username="NTH9R6" data-post="6" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/n/b2d939/48.png" class="avatar"> NTH9R6:</div>
<blockquote>
<p>Does the <code>shutdown -h now</code> command close the LUKS volume or should <code>unmount</code> and <code>cryptsetup luksClose</code> used before that command?<br>
If so I wonder if replacing the <code>RUN+="shutdown -h now"</code> with one of the dracut ram-wipe module hooks would be efficient enough for me to test in non live mode?</p>
</blockquote>
</aside>
<p>I would execute a <code>luksSuspend</code> followed by shutdown. If you want a faster shutdown, try <code>echo o &gt; /proc/sysrq-trigger &amp;</code>. See how we do this at the end of the BusKill self-destruct script:</p>
<ul>
<li><a href="https://github.com/BusKill/buskill-linux/blob/c3e056251377a25e504f5bdc41b2fc17c49f8d2e/triggers/buskill-selfdestruct.sh#L154-L179" class="inline-onebox" rel="noopener nofollow ugc">buskill-linux/triggers/buskill-selfdestruct.sh at c3e056251377a25e504f5bdc41b2fc17c49f8d2e · BusKill/buskill-linux · GitHub</a></li>
</ul>
<pre><code class="lang-auto">#################################
# WIPE DECRYPTION KEYS FROM RAM #
#################################

# suspend each currently-decrypted LUKS volume
${ECHO} "INFO: removing decryption keys from memory"
for device in $( ${LS} -1 "/dev/mapper" ); do

	${ECHO} -e "\t${device}";
	${CRYPTSETUP} luksSuspend "${device}" &amp;

	# clear page caches in memory (again)
	sync; echo 3 &gt; /proc/sys/vm/drop_caches

done

#############################
# (IMMEDIATE) HARD SHUTDOWN #
#############################

# do whatever works; this is important.
echo o &gt; /proc/sysrq-trigger &amp;
sleep 1
shutdown -h now &amp;
sleep 1
poweroff --force --no-sync &amp;
</code></pre>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/7">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/7</link>
        <pubDate>Mon, 21 Apr 2025 21:38:29 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-7</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>TAILS is the only OS that I know-of that is designed to trigger an emergency shutdown when the USB stick that it’s installed-on is removed</p>
</blockquote>
<blockquote>
<p>but you can trivially change that to lock the screen instead, if you prefer.</p>
</blockquote>
<p>Yeah to be clear I’m not looking to shred the LUKS Header I don’t want to destroy my data. While I do understand that such an emergency shutdown might loose some data (like that of the given booted session) I’m okay with that.</p>
<p>What I’m trying to achieve is that in the case of an emergency or that my SSD gets unplugged that it triggers a full shutdown meaning that the LUKS volume is in a closed state. Ideally would like to go further with something similar to Tails that clears wipes RAM also so that things like mentioned by <a class="mention" href="https://forums.kicksecure.com/u/penthouse">@Penthouse</a> would clear the LUKS password from system memory.</p>
<p>I need to look more into all this and report back. The emergency shutdown seems like it could be implemented but the clearing of RAM due the different design (Tails vs dracut) would need to be figured out more. BTW I was not aware of the <code>ram-wipe</code> package until I made this reply.</p>
<p>www .kicksecure.com/wiki/Dev/RAM_Wipe#Differences_of_ram-wipe_versus_Tails_Memory_Erasure</p>
<p><a class="mention" href="https://forums.kicksecure.com/u/maltfield">@maltfield</a><br>
Does the <code>shutdown -h now</code> command close the LUKS volume or should <code>unmount</code> and <code>cryptsetup luksClose</code> used before that command?<br>
If so I wonder if replacing the <code>RUN+="shutdown -h now"</code> with one of the dracut ram-wipe module hooks would be efficient enough for me to test in non live mode?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/6">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/6</link>
        <pubDate>Mon, 21 Apr 2025 19:49:58 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-6</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="NTH9R6" data-post="3" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/n/b2d939/48.png" class="avatar"> NTH9R6:</div>
<blockquote>
<p>Ok, in the meantime though is there a udev starting point I could try to test?</p>
</blockquote>
</aside>
<p>Feel free to experiment with this.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/5">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/5</link>
        <pubDate>Mon, 14 Apr 2025 10:14:15 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-5</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive should trigger a shutdown</title>
        <dc:creator><![CDATA[maltfield]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="https://forums.kicksecure.com/u/nth9r6">@NTH9R6</a> I think you might be confusing TAILS and kicksecure. TAILS is the only OS that I know-of that is designed to trigger an emergency shutdown when the USB stick that it’s installed-on is removed:</p>
<ul>
<li><a href="https://tails.boum.org/doc/first_steps/shutdown/index.en.html" class="inline-onebox" rel="noopener nofollow ugc">Tails - Shutting down Tails</a></li>
</ul>
<p>But, as Patrick pointed-out, probably the easiest way to get your system to shutdown when a USB device ejects is BusKill, which can be installed on debian-based systems:</p>
<pre><code class="lang-auto">sudo apt-get install buskill
buskill
</code></pre>
<p>But if you prefer to do this with udev, we have a guide on that too:</p>
<ul>
<li><a href="https://www.buskill.in/buskill-laptop-kill-cord-dead-man-switch/" class="inline-onebox" rel="noopener nofollow ugc">Introducing BusKill: A Kill Cord for your Laptop - BusKill</a></li>
</ul>
<p>Update: it actually looks like <a href="https://tube.tchncs.de/c/privacy__tech_tips/videos" rel="noopener nofollow ugc">privacy__tech_tips@tube.tchncs.de</a> just published a <a href="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb" rel="noopener nofollow ugc">video showing how to do this on kicksecure</a> today</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb">
  <header class="source">
      <img src="https://tube.tchncs.de/client/assets/images/favicon.png?234ac86bda73f12b2779a87d0c96b326b5fc05ca" class="site-icon" width="32" height="32">

      <a href="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb" target="_blank" rel="noopener nofollow ugc">tchncs</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/389;"><img src="https://tube.tchncs.de/lazy-static/previews/f701559c-14ee-4bb5-9c11-46263aae2253.jpg" class="thumbnail" width="690" height="389"></div>

<h3><a href="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb" target="_blank" rel="noopener nofollow ugc">BusKill: Self Destructing Laptop Storage</a></h3>

  <p>Let's configure BusKill (laptop kill cord) to destroy our encrypted storage (preventing access to sensitive accounts / files) ! This set up will shred our LUKS (Linux encryption) header anytime som...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>They show how to do the self-destruct trigger, but you can trivially change that to lock the screen instead, if you prefer.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/4">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994/4</link>
        <pubDate>Sun, 13 Apr 2025 18:02:08 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-4</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-should-trigger-a-shutdown/994.rss">Unplugging external drive should trigger a shutdown</source>
      </item>
  </channel>
</rss>
