<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
    <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994</link>
    <description>Hello Kicksecure folks,

I installed Debian on my brand new Western Digital external SSD drive. Then I proceeded to distro morph it following the guide (prob should have went with the ISO route) and everything works as intended.

However when I unplug my SSD or it comes unplugged somehow (has happened before) it doesn&#39;t trigger a full shutdown?

Why doesn&#39;t it fully shutdown when unplugged?
I do want to add that also set up LUKS when I installed Debian.

Do I need to create a udev rule that runs a shutdown script (unmount, cryptsetup luksClose, and sync)?</description>
    
    <lastBuildDate>Fri, 09 May 2025 05:15:56 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Did a lot of research into this, the approach I was taking technically worked but was not at all guaranteed to work. The issues (and how to work around them) I documented pretty well in a code comment in the program I’m currently writing to implement this:</p>
<pre data-code-wrap="c"><code class="lang-c">/*
 * This program is designed specifically to immediately and forcibly power off
 * the system in the event the device providing the root filesystem is
 * abruptly removed from the system. The idea is that a user can shut down
 * a portable installation of Kicksecure by simply yanking the USB drive
 * containing the installation from the computer. Tails provides essentially
 * the same feature, however it is known for occasionally failing to do its
 * job properly.
 *
 * The fact that we're triggering a shutdown when the device containing the
 * root filesystem vanishes presents a number of significant challenges:
 *
 * - The device providing the entire operating system is gone. The only things
 *   we will still have left are the kernel, files loaded into RAM (for
 *   instance under /run), and anything that happens to still be in the
 *   system's disk cache.
 * - Virtually any process on the system may abruptly crash at any time. This
 *   isn't just because applications may be unable to access files. The Linux
 *   kernel's virtual memory subsystem doesn't just page out RAM contents to a
 *   swap file, it will sometimes simply erase pages containing executable
 *   code from memory if it can reload that code from disk later when needed.
 *   If part of a program isn't present in memory, and then the root device
 *   vanishes, any attempt to use code in the absent part of the application
 *   will result in the application crashing. (Attempts to access data in RAM
 *   that happened to be paged out will result in a similar crash.)
 * - We have no control over what is and isn't in the disk cache, which makes
 *   it unsafe to launch any dynamically linked executable. What happens if we
 *   need to load a missing part of libc? What if the dynamic linker itself
 *   needs loaded from disk?
 * - Systemd could lock up at any time, since the init process isn't immune to
 *   having bits of it erased from RAM to free up memory. If systemd receives
 *   a SIGSEGV, rather than crashing (which would panic the kernel), it goes
 *   into an "emergency mode" that tries to keep the system as operational as
 *   possible even though PID 1 is now out of service.
 *
 * Circumventing this set of difficulties is not easy, and it might not even
 * be entirely possible. To give our feature the highest chance of success:
 *
 * - We use memlockd to lock systemd into memory. It can holds its own pretty
 *   well in the event of a segfault, but if its crash handler ends up
 *   re-segfaulting, that could get ugly. For good measure, we lock libc,
 *   libsystemd-core, and libsystemd-shared into memory too so that the crash
 *   handler has the highest possible chance of not re-crashing.
 * - We compile the utility at boot time, statically link it against all of
 *   its dependencies (really only one, glibc), and load it into /run. This
 *   allows for decent architecture independence while removing any dependency
 *   on anything that isn't in RAM, thus (hopefully!) making the process
 *   crash-immune.
 * - Because we're static-linking against glibc, we cannot call anything
 *   defined in stdio.h. This is because glibc uses dlopen() to load iconv
 *   modules, which are used internally by glibc for locale support. Things
 *   defined in stdio.h may use iconv, so calling anything there will
 *   basically make our static-linked executable become dynamically linked,
 *   which could segfault it since the root filesystem is gone. We can't call
 *   anything that could touch Name Service Switch (NSS) either, but we have
 *   no need to do so, so we should be safe there. See
 *   https://stackoverflow.com/questions/57476533/why-is-statically-linking-glibc-discouraged
 * - We can't use udev either because libudev is only available as a dynamic
 *   library. That means we have to listen to kernel uevents directly to
 *   determine when the root device vanishes. Thankfully this isn't as much of
 *   a pain as it might sound like.
 * - We don't call out to any external process, since those external processes
 *   could segfault.
 *
 * This is likely superior to Tails' implementation, which uses udev (and thus
 * dynamic linking), uses an interpreter-driven script to shut down the system
 * when the root device vanishes, and calls out to external executables to
 * actually shut the system down. These issues are likely why Tails'
 * implementation of emergency shutdown occasionally fails. See
 * https://www.reddit.com/r/tails/comments/xh8njn/tails_wont_shutdown_when_i_pull_usb_stick/
 * (there are other similar posts as well).
 */
</code></pre>
<p>The rest of my research was focused mainly on figuring out how to read kernel uevents without involving libudev. This took a while, partially because libudev itself was sticking its head in the way and confusing my program’s output, and partially because <code>man 7 netlink</code> was extraordinarily misleading (it told me the data from the kernel I was reading was going to be in one format, it turned out to be in a completely different format). However, I’ve gotten to the point where I <em>can</em> read kernel uevents, which will let me detect when the root filesystem drive is removed without needing any other libraries or executables (which is important for the reasons described above).</p>
<p>Once this is done and working, it might be worth trying to contribute it back to Tails (or at least let them know about our work) so they can improve their implementation as well.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/10">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/10</link>
        <pubDate>Fri, 09 May 2025 05:15:56 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-10</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Won’t be able to finish this tonight, determining the block device that’s <em>actually</em> underneath the filesystem is a bit of a challenge. One of the comments I wrote in my current code reads:</p>
<pre><code class="lang-auto">    # ... the real underlying device may be many
    # layers deep. For instance, with the Kicksecure ISO, the root filesystem
    # is mounted from an overlayfs which uses a lower directory mounted from a
    # loop device backed by a squashfs located in a directory under a
    # mountpoint backed by /dev/sr0 (when booting from a CD-ROM drive that
    # is).
</code></pre>
<p>There’s also some higher-priority work for me to tackle before I finish this. I have most of the research done though, including how to find underlying devices or mountpoints in a wide variety of situations, and how to monitor the real device once you find it. Also wrote a rather thorough “force shutdown” script based partially on <a class="mention" href="https://forums.kicksecure.com/u/maltfield">@maltfield</a>’s suggestions above.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/9">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/9</link>
        <pubDate>Wed, 07 May 2025 05:41:14 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-9</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>This is definitely a good idea. I took a look at the linked video about BusKill, the idea seems good but I don’t think that’s the method we should use for Kicksecure, because it’s bound to the USB product ID. You have to custom-write the udev rule for the specific USB drive in use. We could in theory detect this on boot I guess, but that seems a bit clunky. I also don’t trust USB drive manufacturers to choose truly unique IDs, as opposed to just putting in some example ID they found in documentation somewhere. (If even AMD can make this mistake with encryption keys related to microcode security, I have no reason to trust off-brand USB drive makers to do any better.) The last thing a user needs is to have their system suddenly shut down because they removed a drive that happened to look suspiciously similar to the main drive.</p>
<p>I looked at how Tails has this implemented, and basically:</p>
<ul>
<li>They have a custom C executable, <a href="https://gitlab.tails.boum.org/tails/tails/-/blob/master/config/chroot_local-includes/usr/src/udev-watchdog.c" rel="noopener nofollow ugc">udev-watchdog</a>, which appears to watch for a specified device to be removed and send some sort of signal to whatever called it when that happens.</li>
<li>There’s then a wrapper around it that figures out which device is the boot drive, uses udev-watchdog to watch for when it gets removed, and then triggers a hard shutdown when that happens.</li>
</ul>
<p>This is a somewhat better solution IMO, and the code behind it is open-source so in theory we could just integrate it directly into Kicksecure. It does have some possible downsides though, most notably I found some <a href="https://www.reddit.com/r/tails/comments/xh8njn/tails_wont_shutdown_when_i_pull_usb_stick/" rel="noopener nofollow ugc">reports that the feature didn’t always work three years ago</a>, when the last code change <a href="https://gitlab.tails.boum.org/tails/tails/-/blob/master/config/chroot_local-includes/usr/local/lib/udev-watchdog-wrapper" rel="noopener nofollow ugc">was four years ago</a>. Maybe that was just user error though.</p>
<p>For Kicksecure’s implementation, I’d like to avoid custom C code since Kicksecure tries to use architecture-independent code wherever possible. We can use a udev-based approach similar to Tails, but written using Python and pyudev instead. I’ll try to implement this probably tonight and see what happens.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/8">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/8</link>
        <pubDate>Wed, 07 May 2025 03:23:46 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-8</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[maltfield]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="NTH9R6" data-post="6" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/n/b2d939/48.png" class="avatar"> NTH9R6:</div>
<blockquote>
<p>would clear the LUKS password from system memory.</p>
</blockquote>
</aside>
<p>Take a look at <a href="https://www.man7.org/linux/man-pages/man8/cryptsetup-luksSuspend.8.html" rel="noopener nofollow ugc">luksSuspend</a></p>
<aside class="quote no-group" data-username="NTH9R6" data-post="6" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/n/b2d939/48.png" class="avatar"> NTH9R6:</div>
<blockquote>
<p>Does the <code>shutdown -h now</code> command close the LUKS volume or should <code>unmount</code> and <code>cryptsetup luksClose</code> used before that command?<br>
If so I wonder if replacing the <code>RUN+="shutdown -h now"</code> with one of the dracut ram-wipe module hooks would be efficient enough for me to test in non live mode?</p>
</blockquote>
</aside>
<p>I would execute a <code>luksSuspend</code> followed by shutdown. If you want a faster shutdown, try <code>echo o &gt; /proc/sysrq-trigger &amp;</code>. See how we do this at the end of the BusKill self-destruct script:</p>
<ul>
<li><a href="https://github.com/BusKill/buskill-linux/blob/c3e056251377a25e504f5bdc41b2fc17c49f8d2e/triggers/buskill-selfdestruct.sh#L154-L179" class="inline-onebox" rel="noopener nofollow ugc">buskill-linux/triggers/buskill-selfdestruct.sh at c3e056251377a25e504f5bdc41b2fc17c49f8d2e · BusKill/buskill-linux · GitHub</a></li>
</ul>
<pre><code class="lang-auto">#################################
# WIPE DECRYPTION KEYS FROM RAM #
#################################

# suspend each currently-decrypted LUKS volume
${ECHO} "INFO: removing decryption keys from memory"
for device in $( ${LS} -1 "/dev/mapper" ); do

	${ECHO} -e "\t${device}";
	${CRYPTSETUP} luksSuspend "${device}" &amp;

	# clear page caches in memory (again)
	sync; echo 3 &gt; /proc/sys/vm/drop_caches

done

#############################
# (IMMEDIATE) HARD SHUTDOWN #
#############################

# do whatever works; this is important.
echo o &gt; /proc/sysrq-trigger &amp;
sleep 1
shutdown -h now &amp;
sleep 1
poweroff --force --no-sync &amp;
</code></pre>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/7">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/7</link>
        <pubDate>Mon, 21 Apr 2025 21:38:29 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-7</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <blockquote>
<p>TAILS is the only OS that I know-of that is designed to trigger an emergency shutdown when the USB stick that it’s installed-on is removed</p>
</blockquote>
<blockquote>
<p>but you can trivially change that to lock the screen instead, if you prefer.</p>
</blockquote>
<p>Yeah to be clear I’m not looking to shred the LUKS Header I don’t want to destroy my data. While I do understand that such an emergency shutdown might loose some data (like that of the given booted session) I’m okay with that.</p>
<p>What I’m trying to achieve is that in the case of an emergency or that my SSD gets unplugged that it triggers a full shutdown meaning that the LUKS volume is in a closed state. Ideally would like to go further with something similar to Tails that clears wipes RAM also so that things like mentioned by <a class="mention" href="https://forums.kicksecure.com/u/penthouse">@Penthouse</a> would clear the LUKS password from system memory.</p>
<p>I need to look more into all this and report back. The emergency shutdown seems like it could be implemented but the clearing of RAM due the different design (Tails vs dracut) would need to be figured out more. BTW I was not aware of the <code>ram-wipe</code> package until I made this reply.</p>
<p>www .kicksecure.com/wiki/Dev/RAM_Wipe#Differences_of_ram-wipe_versus_Tails_Memory_Erasure</p>
<p><a class="mention" href="https://forums.kicksecure.com/u/maltfield">@maltfield</a><br>
Does the <code>shutdown -h now</code> command close the LUKS volume or should <code>unmount</code> and <code>cryptsetup luksClose</code> used before that command?<br>
If so I wonder if replacing the <code>RUN+="shutdown -h now"</code> with one of the dracut ram-wipe module hooks would be efficient enough for me to test in non live mode?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/6">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/6</link>
        <pubDate>Mon, 21 Apr 2025 19:49:58 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-6</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="NTH9R6" data-post="3" data-topic="994">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/n/b2d939/48.png" class="avatar"> NTH9R6:</div>
<blockquote>
<p>Ok, in the meantime though is there a udev starting point I could try to test?</p>
</blockquote>
</aside>
<p>Feel free to experiment with this.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/5">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/5</link>
        <pubDate>Mon, 14 Apr 2025 10:14:15 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-5</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[maltfield]]></dc:creator>
        <description><![CDATA[
            <p><a class="mention" href="https://forums.kicksecure.com/u/nth9r6">@NTH9R6</a> I think you might be confusing TAILS and kicksecure. TAILS is the only OS that I know-of that is designed to trigger an emergency shutdown when the USB stick that it’s installed-on is removed:</p>
<ul>
<li><a href="https://tails.boum.org/doc/first_steps/shutdown/index.en.html" class="inline-onebox" rel="noopener nofollow ugc">Tails - Shutting down Tails</a></li>
</ul>
<p>But, as Patrick pointed-out, probably the easiest way to get your system to shutdown when a USB device ejects is BusKill, which can be installed on debian-based systems:</p>
<pre><code class="lang-auto">sudo apt-get install buskill
buskill
</code></pre>
<p>But if you prefer to do this with udev, we have a guide on that too:</p>
<ul>
<li><a href="https://www.buskill.in/buskill-laptop-kill-cord-dead-man-switch/" class="inline-onebox" rel="noopener nofollow ugc">Introducing BusKill: A Kill Cord for your Laptop - BusKill</a></li>
</ul>
<p>Update: it actually looks like <a href="https://tube.tchncs.de/c/privacy__tech_tips/videos" rel="noopener nofollow ugc">privacy__tech_tips@tube.tchncs.de</a> just published a <a href="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb" rel="noopener nofollow ugc">video showing how to do this on kicksecure</a> today</p>
<aside class="onebox allowlistedgeneric" data-onebox-src="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb">
  <header class="source">
      <img src="https://tube.tchncs.de/client/assets/images/favicon.png?234ac86bda73f12b2779a87d0c96b326b5fc05ca" class="site-icon" width="32" height="32">

      <a href="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb" target="_blank" rel="noopener nofollow ugc">tchncs</a>
  </header>

  <article class="onebox-body">
    <div class="aspect-image" style="--aspect-ratio:690/389;"><img src="https://tube.tchncs.de/lazy-static/previews/f701559c-14ee-4bb5-9c11-46263aae2253.jpg" class="thumbnail" width="690" height="389"></div>

<h3><a href="https://tube.tchncs.de/w/q8X2JyxYH26tqYi2VisTHb" target="_blank" rel="noopener nofollow ugc">BusKill: Self Destructing Laptop Storage</a></h3>

  <p>Let's configure BusKill (laptop kill cord) to destroy our encrypted storage (preventing access to sensitive accounts / files) ! This set up will shred our LUKS (Linux encryption) header anytime som...</p>


  </article>

  <div class="onebox-metadata">
    
    
  </div>

  <div style="clear: both"></div>
</aside>

<p>They show how to do the self-destruct trigger, but you can trivially change that to lock the screen instead, if you prefer.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/4">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/4</link>
        <pubDate>Sun, 13 Apr 2025 18:02:08 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-4</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <p>Ok, in the meantime though is there a udev starting point I could try to test?</p>
<p>I’d be willing to test anything related to implementation of such a feature.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/3">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/3</link>
        <pubDate>Fri, 11 Apr 2025 18:32:54 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-3</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[Patrick]]></dc:creator>
        <description><![CDATA[
            <p><a href="https://forums.whonix.org/t/panic-button-panic-shutdown-buskill-the-usb-kill-cord-for-your-laptop/13755" class="inline-onebox">panic button / panic shutdown / BusKill - The USB kill cord for your laptop - Development - Whonix Forum</a> alike functionality is not a standard, default functionality of Debian (or any operating system that I am aware of).</p>
<p>Adding such a feature is planned but will take time.</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/2">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/2</link>
        <pubDate>Wed, 09 Apr 2025 10:06:45 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-2</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
      <item>
        <title>Unplugging external drive doesn&#39;t trigger a shutdown</title>
        <dc:creator><![CDATA[NTH9R6]]></dc:creator>
        <description><![CDATA[
            <p>Hello Kicksecure folks,</p>
<p>I installed Debian on my brand new Western Digital external SSD drive. Then I proceeded to distro morph it following the guide (prob should have went with the ISO route) and everything works as intended.</p>
<p>However when I unplug my SSD or it comes unplugged somehow (has happened before) it doesn’t trigger a full shutdown?</p>
<p>Why doesn’t it fully shutdown when unplugged?<br>
I do want to add that also set up LUKS when I installed Debian.</p>
<p>Do I need to create a udev rule that runs a shutdown script (unmount, cryptsetup luksClose, and sync)?</p>
          <p><a href="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/1">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994/1</link>
        <pubDate>Wed, 09 Apr 2025 10:04:29 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-994-1</guid>
        <source url="https://forums.kicksecure.com/t/unplugging-external-drive-doesnt-trigger-a-shutdown/994.rss">Unplugging external drive doesn&#39;t trigger a shutdown</source>
      </item>
  </channel>
</rss>
