<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
    <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412</link>
    <description>Hello everyone!

After upgrading from Kicksecure 17 to 18 I noticed that `sdwdate` never finished syncing time. After checking the logs I found several lines similar to this,

`SECCOMP auid=4294967295 uid=117 gid=130 ses=4294967295 subj=unconfined pid=6319 comm=“leaprun” exe=“/usr/bin/python3.13” sig=31 arch=c000003e syscall=332 compat=0 ip=0x7c87efbaf31a code=0x80000000`

By following the instructions on [Debugging Systemd Seccomp](https://www.kicksecure.com/wiki/Seccomp), I figure out that syscalls 332 (statx), 138 (fstatfs) and 441 (epoll_pwait2) needed to be added to `SystemCallFilter=`. And indeed after doing that the issue was completely fixed. Architecture is x86_64.

Sorry if this is not the correct category, I wasn’t sure if I should post this on Support or Development.</description>
    
    <lastBuildDate>Tue, 23 Dec 2025 23:23:57 +0000</lastBuildDate>
    <category>Support</category>
    <atom:link href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="oblivion_devourer" data-post="5" data-topic="1412">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/letter_avatar_proxy/v4/letter/o/bc79bd/48.png" class="avatar"> oblivion_devourer:</div>
<blockquote>
<p>My architecture is x86_64, I already mentioned that on my original post.</p>
</blockquote>
</aside>
<p><img src="https://forums.kicksecure.com/images/emoji/twitter/person_facepalming.png?v=14" title=":person_facepalming:" class="emoji" alt=":person_facepalming:" loading="lazy" width="20" height="20"> you’re right, my apologies, I missed that.</p>
<p>All my machines are Intel-based. I haven’t seen the issue there, but I do know that differences in CPU architectures can cause issues like this, and I note you’re using an AMD machine, so… maybe that’s the issue? In any event, we’ll likely add those syscalls to the filter. Thank you for reporting this!</p>
          <p><a href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/6">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/6</link>
        <pubDate>Tue, 23 Dec 2025 23:23:57 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1412-6</guid>
        <source url="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss">Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</source>
      </item>
      <item>
        <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
        <dc:creator><![CDATA[oblivion_devourer]]></dc:creator>
        <description><![CDATA[
            <p>My architecture is x86_64, I already mentioned that on my original post. I am attaching though the entire output of the <code>lscpu</code> just in case it’s proven useful.</p>
<pre data-code-wrap="shell"><code class="lang-shell">Architecture:                x86_64
  CPU op-mode(s):            32-bit, 64-bit
  Address sizes:             48 bits physical, 48 bits virtual
  Byte Order:                Little Endian
CPU(s):                      24
  On-line CPU(s) list:       0-23
Vendor ID:                   AuthenticAMD
  Model name:                AMD Ryzen 9 7900 12-Core Processor
    CPU family:              25
    Model:                   97
    Thread(s) per core:      2
    Core(s) per socket:      12
    Socket(s):               1
    Stepping:                2
    Frequency boost:         enabled
    CPU(s) scaling MHz:      64%
    CPU max MHz:             5482.0000
    CPU min MHz:             545.0000
    BogoMIPS:                7400.26
    Flags:                   fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov pat pse36 clflush mmx fxsr sse sse2 ht sy
                             scall nx mmxext fxsr_opt pdpe1gb rdtscp lm constant_tsc rep_good amd_lbr_v2 nopl xtopology nonstop_tsc 
                             cpuid extd_apicid aperfmperf rapl pni pclmulqdq monitor ssse3 fma cx16 sse4_1 sse4_2 movbe popcnt aes x
                             save avx f16c rdrand lahf_lm cmp_legacy svm extapic cr8_legacy abm sse4a misalignsse 3dnowprefetch osvw
                              ibs skinit wdt tce topoext perfctr_core perfctr_nb bpext perfctr_llc mwaitx cpb cat_l3 cdp_l3 hw_pstat
                             e pti ssbd mba perfmon_v2 ibrs ibpb stibp ibrs_enhanced vmmcall fsgsbase bmi1 avx2 smep bmi2 erms invpc
                             id cqm rdt_a avx512f avx512dq rdseed adx smap avx512ifma clflushopt clwb avx512cd sha_ni avx512bw avx51
                             2vl xsaveopt xsavec xgetbv1 xsaves cqm_llc cqm_occup_llc cqm_mbm_total cqm_mbm_local user_shstk avx512_
                             bf16 clzero irperf xsaveerptr rdpru wbnoinvd cppc arat npt lbrv svm_lock nrip_save tsc_scale vmcb_clean
                              flushbyasid decodeassists pausefilter pfthreshold avic vgif x2avic v_spec_ctrl vnmi avx512vbmi umip pk
                             u ospke avx512_vbmi2 gfni vaes vpclmulqdq avx512_vnni avx512_bitalg avx512_vpopcntdq rdpid overflow_rec
                             ov succor smca fsrm flush_l1d amd_lbr_pmc_freeze
Virtualization features:     
  Virtualization:            AMD-V
Caches (sum of all):         
  L1d:                       384 KiB (12 instances)
  L1i:                       384 KiB (12 instances)
  L2:                        12 MiB (12 instances)
  L3:                        64 MiB (2 instances)
NUMA:                        
  NUMA node(s):              1
  NUMA node0 CPU(s):         0-23
Vulnerabilities:             
  Gather data sampling:      Not affected
  Indirect target selection: Mitigation; Aligned branch/return thunks
  Itlb multihit:             Not affected
  L1tf:                      Not affected
  Mds:                       Not affected
  Meltdown:                  Not affected
  Mmio stale data:           Not affected
  Reg file data sampling:    Not affected
  Retbleed:                  Not affected
  Spec rstack overflow:      Mitigation; Safe RET
  Spec store bypass:         Mitigation; Speculative Store Bypass disabled
  Spectre v1:                Mitigation; usercopy/swapgs barriers and __user pointer sanitization
  Spectre v2:                Mitigation; Enhanced / Automatic IBRS; IBPB always-on; STIBP forced; PBRSB-eIBRS Not affected; BHI Not 
                             affected
  Srbds:                     Not affected
  Tsa:                       Vulnerable: Clear CPU buffers attempted, no microcode
  Tsx async abort:           Not affected
  Vmscape:                   Mitigation; IBPB before exit to userspace

</code></pre>
<p>I should probably point out that I have enabled SMT by editing the <code>/etc/default/grub.d/40_cpu_mitigations.cfg</code> following the instructions in the comments. I haven’t touched the rest of the CPU mitigations, I just didn’t want half of my CPU threads to be disabled.</p>
<p>To be clear though, the issue with <code>sdwdate</code> appeared immediately after the first reboot after the upgrade to 18, before I made any configuration changes.</p>
          <p><a href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/5">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/5</link>
        <pubDate>Tue, 23 Dec 2025 23:11:26 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1412-5</guid>
        <source url="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss">Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</source>
      </item>
      <item>
        <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>The main thing I’d be interested in knowing is what CPU architecture you’re using. This should show it:</p>
<pre><code class="lang-auto">lscpu | grep Architecture
</code></pre>
          <p><a href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/4">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/4</link>
        <pubDate>Tue, 23 Dec 2025 22:45:33 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1412-4</guid>
        <source url="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss">Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</source>
      </item>
      <item>
        <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
        <dc:creator><![CDATA[oblivion_devourer]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="arraybolt3" data-post="2" data-topic="1412">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/user_avatar/forums.kicksecure.com/arraybolt3/48/88_2.png" class="avatar"> arraybolt3:</div>
<blockquote>
<p>Are you using this on baremetal or in a virtual machine?</p>
</blockquote>
</aside>
<p>It’s on baremetal.</p>
<aside class="quote no-group" data-username="arraybolt3" data-post="2" data-topic="1412">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://forums.kicksecure.com/user_avatar/forums.kicksecure.com/arraybolt3/48/88_2.png" class="avatar"> arraybolt3:</div>
<blockquote>
<p>Could you share some details of your hardware or hypervisor if possible?</p>
</blockquote>
</aside>
<p>Certainly, just tell me what you want to know. Do you need the output of any particular commands?</p>
          <p><a href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/3">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/3</link>
        <pubDate>Tue, 23 Dec 2025 07:19:38 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1412-3</guid>
        <source url="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss">Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</source>
      </item>
      <item>
        <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
        <dc:creator><![CDATA[arraybolt3]]></dc:creator>
        <description><![CDATA[
            <p>Odd that we didn’t run into this during development. Are you using this on baremetal or in a virtual machine? Could you share some details of your hardware or hypervisor if possible? That might help us reproduce the issue.</p>
<p>(All three of those system calls sound pretty benign, so we can probably add them to the filter even if we can’t reproduce this.)</p>
          <p><a href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/2">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/2</link>
        <pubDate>Tue, 23 Dec 2025 00:09:51 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1412-2</guid>
        <source url="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss">Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</source>
      </item>
      <item>
        <title>Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</title>
        <dc:creator><![CDATA[oblivion_devourer]]></dc:creator>
        <description><![CDATA[
            <p>Hello everyone!</p>
<p>After upgrading from Kicksecure 17 to 18 I noticed that <code>sdwdate</code> never finished syncing time. After checking the logs I found several lines similar to this,</p>
<p><code>SECCOMP auid=4294967295 uid=117 gid=130 ses=4294967295 subj=unconfined pid=6319 comm=“leaprun” exe=“/usr/bin/python3.13” sig=31 arch=c000003e syscall=332 compat=0 ip=0x7c87efbaf31a code=0x80000000</code></p>
<p>By following the instructions on <a href="https://www.kicksecure.com/wiki/Seccomp" rel="noopener nofollow ugc">Debugging Systemd Seccomp</a>, I figure out that syscalls 332 (statx), 138 (fstatfs) and 441 (epoll_pwait2) needed to be added to <code>SystemCallFilter=</code>. And indeed after doing that the issue was completely fixed. Architecture is x86_64.</p>
<p>Sorry if this is not the correct category, I wasn’t sure if I should post this on Support or Development.</p>
          <p><a href="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/1">Read full topic</a></p>
        ]]></description>
        <link>https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412/1</link>
        <pubDate>Mon, 22 Dec 2025 12:34:48 +0000</pubDate>
        <guid isPermaLink="false">forums.kicksecure.com-post-1412-1</guid>
        <source url="https://forums.kicksecure.com/t/sdwdate-broken-after-upgrade-to-kicksecure-18-missing-seccomp-syscalls-statx-fstatfs-epoll-pwait2/1412.rss">Sdwdate broken after upgrade to Kicksecure 18: Missing SECCOMP syscalls (statx, fstatfs, epoll_pwait2)</source>
      </item>
  </channel>
</rss>
